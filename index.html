<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>bévue</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #ffffff;
      touch-action: none; /* important pour mobile */
      font-family: Arial, Helvetica, sans-serif;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <canvas id="scene"></canvas>

  <script>
    const canvas = document.getElementById('scene');
    const ctx = canvas.getContext('2d');

    let width, height;
    function resize() {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
      baseFontSize = Math.min(width, height) * 0.35;
      letters.forEach((l, i) => {
        l.targetX = width / 2 + (i - 2) * baseFontSize * 0.45;
        l.targetY = height / 2;
      });
    }
    window.addEventListener('resize', resize);

    const word = ['b', 'é', 'v', 'u', 'e'];
    let baseFontSize = 200;

    const letters = word.map((char, i) => ({
      char,
      x: Math.random() * window.innerWidth,
      y: Math.random() * window.innerHeight,
      vx: 0,
      vy: 0,
      targetX: 0,
      targetY: 0
    }));

    const pointer = { x: null, y: null, active: false };

    function setPointer(x, y) {
      pointer.x = x;
      pointer.y = y;
      pointer.active = true;
    }

    window.addEventListener('mousemove', e => setPointer(e.clientX, e.clientY));
    window.addEventListener('mouseleave', () => pointer.active = false);

    window.addEventListener('touchstart', e => {
      const t = e.touches[0];
      setPointer(t.clientX, t.clientY);
    }, { passive: false });

    window.addEventListener('touchmove', e => {
      const t = e.touches[0];
      setPointer(t.clientX, t.clientY);
    }, { passive: false });

    window.addEventListener('touchend', () => pointer.active = false);

    function update() {
      ctx.clearRect(0, 0, width, height);
      ctx.fillStyle = '#000';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.font = `${baseFontSize}px Arial`;

      letters.forEach(l => {
        // attraction vers position cible (organisation selon la taille de l'écran)
        const ax = (l.targetX - l.x) * 0.002;
        const ay = (l.targetY - l.y) * 0.002;
        l.vx += ax;
        l.vy += ay;

        // interaction souris / toucher (combat)
        if (pointer.active) {
          const dx = l.x - pointer.x;
          const dy = l.y - pointer.y;
          const dist = Math.sqrt(dx * dx + dy * dy) || 1;
          const force = Math.min(150 / dist, 5);
          l.vx += (dx / dist) * force;
          l.vy += (dy / dist) * force;
        }

        // friction
        l.vx *= 0.92;
        l.vy *= 0.92;

        l.x += l.vx;
        l.y += l.vy;

        ctx.fillText(l.char, l.x, l.y);
      });

      requestAnimationFrame(update);
    }

    resize();
    update();
  </script>
</body>
</html>
